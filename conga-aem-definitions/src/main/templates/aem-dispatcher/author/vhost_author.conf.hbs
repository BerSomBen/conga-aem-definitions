{{ensureProperties
    "httpd.serverName"
~}}

# Virtual host for author (HTTP)
<VirtualHost *:80>

{{#if httpd.ssl.enforce}}
{{#partial "rewriteEnforcePrimaryHostname"}}
# Make sure primary hostname and ssl is always used  - but don't rewrite the dispatcher invalidation URL
RewriteCond %{REQUEST_URI} !^/dispatcher/invalidate.cache
RewriteRule ^(.*)$ https://{{httpd.serverNameSsl}}$1 [R=301,L]
{{/partial}}
{{/if~}}

{{> aem-dispatcher/author/vhost_author.partials.hbs}}

</VirtualHost>
