[feature name=aem-cms-system-config]


[configurations]

{{~#if quickstart.enableDavEx}}
  # Enable Apache Sling DavEx Servlet to be able to use CRX DE Lite
  org.apache.sling.jcr.davex.impl.servlets.SlingDavExServlet
    alias="/crx/server"
    dav.create-absolute-uri=B"true"
{{~/if}}

{{#if sling.caconfig.overrides}}
  # Sling Context-Aware Configuration Overrides
  org.apache.sling.caconfig.impl.override.OsgiConfigurationOverrideProvider-conga-aem-cms-system-config
    enabled=B"true"
    description="CONGA aem-cms-system-config"
    overrides=[
      {{~#each sling.caconfig.overrides ~}}
        {{~#each this ~}}
          "[{{../@key}}]{{this}}",
        {{~/each ~}}
      {{~/each ~}}
    ]
{{/if}}

{{#if quickstart.adminUser.password}}
  # Apache Felix OSGi Management Console configuration
  org.apache.felix.webconsole.internal.servlet.OsgiManager
    username="{{quickstart.adminUser.username}}"
    password="{{webconsolePasswordHash quickstart.adminUser.password}}"
{{/if}}


{{~#aemTenantsCloudManagerConditional "groupedCloudManagerConditionals"}}{{/aemTenantsCloudManagerConditional}}
{{~#each groupedCloudManagerConditionals as |cloudManagerConditionals targetEnvironment|}}
[configurations runModes=publish,{{targetEnvironment}}]

  # Change Sling Mapping root path for {{targetEnvironment}} environment
  org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl
    resource.resolver.map.location="/etc/map.publish.{{targetEnvironment}}"
    resource.resolver.log.unclosed=B"false"
    resource.resolver.manglenamespaces=B"true"
    resource.resolver.map.observation=["/libs","/apps","/content","/etc","/conf"]
    resource.resolver.mapping=["/:/"]
    resource.resolver.searchpath=["/apps","/libs"]
    resource.resolver.vanitypath.blacklist=["/content/usergenerated"]
    resource.resolver.vanitypath.whitelist=["/apps/","/libs/","/content/"]

{{/each ~}}
